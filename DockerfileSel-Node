FROM ubuntu
MAINTAINER Sam Irvine

USER root
RUN apt-get update -y && apt-get install -y default-jdk firefox tar

ADD https://goo.gl/Lyo36k /opt/selenium-server-standalone-3.0.1.jar
RUN mkdir /opt/geckodriver
ADD https://github.com/mozilla/geckodriver/releases/download/v0.11.1/geckodriver-v0.11.1-linux64.tar.gz /opt/geckodriver
RUN tar xzvf /opt/geckodriver/geckodriver-v0.11.1-linux64.tar.gz -C /opt/geckodriver

ENV PATH /opt/geckodriver/geckodriver
ENV JAVA_HOME /usr/lib/jvm/default-java

#RUN java -jar /opt/selenium-server-standalone-3.0.1.jar -role hub
#RUN java -jar /opt/selenium-server-standalone-3.0.1.jar -role node  -hub http://sel-host:4444/grid/register

ENTRYPOINT java -jar /opt/selenium-server-standalone-3.0.1.jar -role node  -hub http://sel-host:4444/grid/register -browser browserName=firefox
